8. Write a program to merge two BSTs into a doubly-linked list in sorted order.


#include <iostream>
using namespace std;

struct Node {
    int data;
    Node *left, *right;
};


Node* newNode(int data) {
    Node* temp = new Node();
    temp->data = data;
    temp->left = temp->right = nullptr;
    return temp;
}


Node* insert(Node* root, int data) {
    if (!root) return newNode(data);

    if (data < root->data)
        root->left = insert(root->left, data);
    else
        root->right = insert(root->right, data);

    return root;
}


void bstToDLL(Node* root, Node*& head, Node*& prev) {
    if (!root) return;

    
    bstToDLL(root->left, head, prev);

 
    if (prev == nullptr)
        head = root;         
    else {
        prev->right = root;
        root->left = prev;
    }
    prev = root;


    bstToDLL(root->right, head, prev);
}


Node* mergeDLL(Node* a, Node* b) {
    if (!a) return b;
    if (!b) return a;

    Node* head = nullptr;
    Node* tail = nullptr;

  
    while (a && b) {
        Node* temp;
        if (a->data < b->data) {
            temp = a;
            a = a->right;
        } else {
            temp = b;
            b = b->right;
        }

        temp->left = temp->right = nullptr;

        if (head == nullptr) {
            head = tail = temp;
        } else {
            tail->right = temp;
            temp->left = tail;
            tail = temp;
        }
    }

    while (a) {
        Node* temp = a;
        a = a->right;
        temp->right = temp->left = nullptr;

        tail->right = temp;
        temp->left = tail;
        tail = temp;
    }

    while (b) {
        Node* temp = b;
        b = b->right;
        temp->right = temp->left = nullptr;

        tail->right = temp;
        temp->left = tail;
        tail = temp;
    }

    return head;
}


void printDLL(Node* head) {
    while (head) {
        cout << head->data << " ";
        head = head->right;
    }
}

int main() {
    
    Node* root1 = NULL;
    root1 = insert(root1, 30);
    insert(root1, 20);
    insert(root1, 40);


    Node* root2 = NULL;
    root2 = insert(root2, 10);
    insert(root2, 25);
    insert(root2, 35);
    insert(root2, 50);

 
    Node *head1 = NULL, *prev1 = NULL;
    bstToDLL(root1, head1, prev1);

    Node *head2 = NULL, *prev2 = NULL;
    bstToDLL(root2, head2, prev2);

    Node* merged = mergeDLL(head1, head2);

    cout << "Merged Sorted Doubly Linked List:\n";
    printDLL(merged);

    return 0;
}
